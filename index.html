<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>واجهة لعبة الفيروس (الصفحة الرئيسية)</title>
  <!-- Load Tailwind CSS for utility classes -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Load Phosphor Icons for Task/Leader icons -->
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'dark-bg': '#141414',
            'deep-green': '#0e3a2c',
            'virus-green': '#4caf50',
            'accent-green': '#00ff73',
            'card-dark': '#1e1e1e',
            'button-bg': '#194939',
            'button-hover': '#21634d',
          },
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          }
        }
      }
    }
  </script>
  <style>
    /* Custom styles matching the mobile-first design aesthetic */
    body {
      background-color: #1a1a1a; /* لون الخلفية الأغمق */
      color: #e0e0e0;
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-bottom: 20px;
    }

    .header-bar {
      background-color: #262626; /* خلفية الشريط العلوي */
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }

    .stat-badge {
      background-color: #194939; /* خلفية شارة النقاط */
      color: #00ff73; /* لون النقاط الأخضر اللامع */
      font-weight: 700;
      box-shadow: 0 0 10px rgba(0, 255, 115, 0.3);
      padding: 6px 10px;
      font-size: 0.9rem;
    }

    .main-count {
      font-size: 2.5rem; /* حجم خط كبير للعداد */
      font-weight: 800;
      letter-spacing: -1px;
      color: #00ff73; /* اللون الأخضر الساطع */
      text-shadow: 0 0 15px rgba(0, 255, 115, 0.6);
      transition: all 0.3s ease;
    }

    .action-button {
      /* تصميم الأزرار كما في الفيديو: مستطيلة، زوايا دائرية، تباين عالي */
      background-color: #1e1e1e; /* خلفية داكنة للأزرار */
      color: #00ff73;
      border: 3px solid #194939; /* إطار داكن */
      transition: all 0.2s ease;
      box-shadow: 0 4px #0e3a2c; /* ظل سفلي يعطي عمق */
    }

    .action-button:hover {
      background-color: #2c2c2c;
      box-shadow: 0 2px #0e3a2c;
      transform: translateY(2px);
    }
  </style>
</head>
<body dir="rtl">
  <!-- JavaScript Variables for Simulation (Replace with actual data fetching later) -->
  <script>
    // متغيرات لمحاكاة بيانات المستخدم
    let virusCount = 1205697;
    let coins = 143;
    let isHealthy = true;
  </script>

  <!-- شريط التنقل العلوي -->
  <header class="header-bar fixed top-0 left-0 w-full p-3 flex justify-between items-center z-10">
    <button class="text-white text-base font-semibold py-1 px-2 rounded-full hover:opacity-75 transition" onclick="alert('ملف التعريف غير مُبرمج بعد')">
      Profile >>
    </button>
    <div class="stat-badge flex items-center rounded-full">
      <i class="ph ph-leaf-fill text-lg"></i>
      <span id="coins-count" class="mr-1 tracking-wider">1,205,697</span>
    </div>
  </header>

  <!-- المحتوى الرئيسي (Main Content) -->
  <main class="w-full max-w-md mx-auto pt-16 px-4 flex flex-col items-center">

    <!-- عداد الفيروسات -->
    <div class="text-center my-6">
      <div class="text-xs uppercase text-gray-500 mb-1 tracking-widest">
        <i class="ph ph-biohazard text-xl text-gray-500 ml-1"></i> VIRUS
      </div>
      <div id="virus-count" class="main-count">
        1,205,697
      </div>
    </div>

    <!-- رسم الفيروس (SVG Simple Placeholder) -->
    <div class="my-8 w-40 h-40" onclick="incrementVirusCount()">
      <svg viewBox="0 0 100 100" class="w-full h-full">
        <defs>
          <filter id="virusGlow" x="-50%" y="-50%" width="200%" height="200%">
            <feDropShadow dx="0" dy="0" stdDeviation="5" flood-color="#4caf50" flood-opacity="0.8"/>
          </filter>
        </defs>
        <!-- الجسم الرئيسي - دائرة خضراء مع تأثير توهج -->
        <circle cx="50" cy="50" r="40" fill="#4caf50" filter="url(#virusGlow)"/>
        <!-- النتوءات/الأطراف (محاكاة شكل الفيروس) -->
        <circle cx="50" cy="50" r="45" stroke="#76ff03" stroke-width="3" fill="none" opacity="0.3"/>
        <g fill="#76ff03">
          <circle cx="20" cy="50" r="5"/>
          <circle cx="80" cy="50" r="5"/>
          <circle cx="50" cy="20" r="5"/>
          <circle cx="50" cy="80" r="5"/>
          <circle cx="30" cy="30" r="5"/>
          <circle cx="70" cy="70" r="5"/>
          <circle cx="30" cy="70" r="5"/>
          <circle cx="70" cy="30" r="5"/>
        </g>
        <!-- العيون (Eyes) -->
        <circle cx="40" cy="45" r="5" fill="#141414"/>
        <circle cx="60" cy="45" r="5" fill="#141414"/>
        <!-- الفم (Mouth) - ابتسامة بسيطة -->
        <path d="M 40 65 Q 50 75 60 65" stroke="#141414" stroke-width="3" fill="none" stroke-linecap="round"/>
      </svg>
    </div>

    <!-- حالة الصحة -->
    <div id="health-status" class="text-center my-6">
      <h2 class="text-2xl font-bold uppercase text-white mb-2 tracking-wide">
        YOU ARE HEALTHY
      </h2>
      <p class="text-sm text-gray-400">
        Complete tasks, infect the world, <br> and earn VIRUS
      </p>
    </div>

    <!-- أزرار الإجراءات الرئيسية -->
    <div class="flex justify-around w-full my-6">
      <button id="tasks-button" class="action-button flex items-center justify-center px-8 py-4 rounded-xl text-lg font-bold">
        TASKS >>
      </button>
      <button id="leaders-button" class="action-button flex items-center justify-center px-8 py-4 rounded-xl text-lg font-bold">
        LEADERS >>
      </button>
    </div>

    <p class="mt-8 text-xs text-gray-600">
      *هذه محاكاة لواجهة Telegram Web App، التفاعل الحقيقي يتطلب خادمًا.
    </p>
  </main>

  <script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand(); 
    
    // استخدام متغيرات JavaScript بدلاً من DOM مباشرة
    let currentVirusCount = virusCount;

    // تحديث العداد في الواجهة
    const updateVirusDisplay = () => {
      document.getElementById('virus-count').textContent = currentVirusCount.toLocaleString('en-US');
    };
    
    // دالة لزيادة عداد الفيروس عند النقر على الفيروس (محاكاة)
    function incrementVirusCount() {
      currentVirusCount++;
      updateVirusDisplay();
      console.log(`Virus Count Increased to: ${currentVirusCount}`);
    }

    // إضافة وظائف للأزرار (حالياً فقط إرسال رسائل للبوت)
    document.getElementById('tasks-button').addEventListener('click', () => {
      // إرسال البيانات إلى البوت عندما يضغط المستخدم على المهام
      tg.sendData("tasks_clicked");
      alert("تم إرسال أمر 'tasks_clicked' إلى البوت!");
    });

    document.getElementById('leaders-button').addEventListener('click', () => {
      // إرسال البيانات إلى البوت عندما يضغط المستخدم على القادة
      tg.sendData("leaders_clicked");
      alert("تم إرسال أمر 'leaders_clicked' إلى البوت!");
    });
    
    // تحديث العرض الأولي
    updateVirusDisplay();

  </script>
</body>
</html>

